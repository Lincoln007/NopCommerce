/*
* Copyright 2016 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

!function(t,e){function r(r,i,a,n){var o=new Object;return o.CategoryId=r,o.ManufacturerId=i,o.VendorId=a,o.AttributeFilterGroups=new Array,t(".attributeFilterPanel7Spikes .filtersGroupPanel").each(function(){var r=t(this),i=parseInt(r.attr("data-optionsGroupId"))||0,a=new Object;a.Id=i,void 0!=n&&n.is(r)&&(a.IsMain=!0,o.Priority=1),a.FilterItems=new Array,r.find("[data-option-ids]").each(function(){var r=t(this),i=r.attr("data-option-ids"),n=r.attr("data-valueId"),o=i.split(","),s=new Object;s.ValueId=n,s.ProductVariantAttributeIds=o,s.FilterItemState=e.getFilterItemStateBasedOnAttributes(r),a.FilterItems.push(s)}),o.AttributeFilterGroups.push(a)}),o}function i(r,i){var a="usedropdowns"===i;t(".attributeFilterPanel7Spikes .filtersGroupPanel").each(function(){var i=t(this),n=parseInt(i.attr("data-optionsGroupId"))||0,o=t.grep(r.AttributeFilterGroups,function(t){return t.Id===n});if(0!==o.length){var s=a;i.find("[data-option-ids]").each(function(){var r=t(this),i=parseInt(r.attr("data-valueId"))||0,n=t.grep(o[0].FilterItems,function(t){return t.ValueId===i});0!==n.length&&(s=e.addStateClassAndAttributesToOption(r,n[0].FilterItemState,a,s))}),a&&s&&i.find('[value="0"]').attr("selected","selected")}})}e.prototype.buildAttributeFiltersModel=r,e.prototype.refreshAttributeFilters=i,t(document).ready(function(){t(".attributeFilterPanel7Spikes").find('.attribute-options-select, .checkbox-list input[type="checkbox"]').on("change",function(){var r=t(this),i=r.closest("div[data-optionsgroupid]"),a=new e;a.requestProductsForSelectedFilters(i,r)})})}(jQuery,FiltersManager);