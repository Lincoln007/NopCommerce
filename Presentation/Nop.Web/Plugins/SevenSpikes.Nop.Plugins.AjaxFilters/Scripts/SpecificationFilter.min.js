/*
* Copyright 2016 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

!function(t,e){function i(i,r,n,a){var o=new Object;return o.CategoryId=i,o.ManufacturerId=r,o.VendorId=n,o.SpecificationFilterGroups=new Array,t(".specificationFilterPanel7Spikes .filtersGroupPanel").each(function(){var i=t(this),r=parseInt(i.attr("data-optionsGroupId"))||0,n=new Object;n.Id=r,void 0!=a&&a.is(i)&&(n.IsMain=!0,o.Priority=1),n.FilterItems=new Array,i.find("[data-option-ids]").each(function(){var i=t(this),r=i.attr("data-option-ids"),a=new Object;a.Id=r,a.FilterItemState=e.getFilterItemStateBasedOnAttributes(i),n.FilterItems.push(a)}),o.SpecificationFilterGroups.push(n)}),o}function r(i,r){var n="usedropdowns"===r;t(".specificationFilterPanel7Spikes .filtersGroupPanel").each(function(){var r=t(this),a=parseInt(r.attr("data-optionsGroupId"))||0,o=t.grep(i.SpecificationFilterGroups,function(t){return t.Id===a});if(0!==o.length){var s=n;r.find("[data-option-ids]").each(function(){var i=t(this),r=parseInt(i.attr("data-option-ids"))||0,a=t.grep(o[0].FilterItems,function(t){return t.Id===r});0!==a.length&&(s=e.addStateClassAndAttributesToOption(i,a[0].FilterItemState,n,s))}),n&&s&&r.find('[value="0"]').attr("selected","selected")}})}e.prototype.buildSpecificationFiltersModel=i,e.prototype.refreshSpecificationFilters=r,t(document).ready(function(){t(".specificationFilterPanel7Spikes").find('.attribute-options-select, .checkbox-list input[type="checkbox"]').on("change",function(){var i=t(this),r=i.closest("div[data-optionsGroupId]"),n=new e;n.requestProductsForSelectedFilters(r,i)})})}(jQuery,FiltersManager);