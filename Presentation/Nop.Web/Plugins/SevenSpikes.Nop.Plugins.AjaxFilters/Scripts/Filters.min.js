/*
 * Copyright 2016 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
 * http://www.nop-templates.com/t/licensinginfo
 */
FiltersManager = function() {
        this.isOnSearchPage = $(".nopAjaxFilters7Spikes").attr("data-isonsearchpage"), this.keyword = $(".nopAjaxFilters7Spikes").attr("data-searchkeyword"), this.searchCategoryId = $(".nopAjaxFilters7Spikes").attr("data-searchcategoryid"), this.searchManufacturerId = $(".nopAjaxFilters7Spikes").attr("data-searchmanufacturerid"), this.priceFrom = $(".nopAjaxFilters7Spikes").attr("data-searchpricefrom"), this.priceTo = $(".nopAjaxFilters7Spikes").attr("data-searchpriceto"), this.includeSubcategories = $(".nopAjaxFilters7Spikes").attr("data-searchincludesubcategories"), this.searchInProductDescriptions = $(".nopAjaxFilters7Spikes").attr("data-searchinproductdescriptions"), this.advancedSearch = $(".nopAjaxFilters7Spikes").attr("data-searchadvancedsearch"), this.categoryId = $(".nopAjaxFilters7Spikes").attr("data-categoryId"), this.manufacturerId = $(".nopAjaxFilters7Spikes").attr("data-manufacturerId"), this.vendorId = $(".nopAjaxFilters7Spikes").attr("data-vendorId"), this.getFilteredProductsUrl = $(".nopAjaxFilters7Spikes").attr("data-getFilteredProductsUrl"), this.filtersUIMode = $(".nopAjaxFilters7Spikes").attr("data-filtersUIMode"), this.filtersUIModeEnum = {
            userCheckboxes: "usecheckboxes",
            useDropDowns: "usedropdowns"
        }, this.selectedFilterGroupElement = void 0, this.selectedFilterOptionElement = void 0, this.isProductRefreshTriggeredByScroll = !1
    },
    function(e, t, r) {
        function i(t, r) {
            var i = e(t);
            i.each(function() {
                var t = e(this);
                t.is("select") ? t.val() !== r && (t.val(r).attr("valueChangedByScript", "true"), t.change()) : (r = currentTarget.attr("data-dropdownoptionvalue"), i.removeClass("selected").filter("." + r).addClass("selected"))
            })
        }

        function a(t) {
            if (e(t).length > 0) return t;
            var r = t.slice(1);
            return t.startsWith("#") ? "." + r : t.startsWith(".") ? "#" + r : t
        }

        function o() {
            var t = e(".nopAjaxFilters7Spikes").attr("data-viewOptionsDropDownSelector") || ".products-viewmode, .viewmode-icon";
            return a(t)
        }

        function s(t) {
            t.hasClass("closed") === !0 ? t.removeClass("closed") : t.addClass("closed"), t.parent().siblings(".filtersGroupPanel").slideToggle("slow", function() {
                e(this).css("overflow", "")
            })
        }

        function l() {
            var t = e(".nopAjaxFilters7Spikes").first(),
                r = e(".block.filter-block.selected-options").first(),
                i = t.attr("data-selectedOptionsTargetSelector") || ".nopAjaxFilters7Spikes .filtersPanel:first",
                a = "usedropdowns" === t.attr("data-filtersuimode");
            switch (t.attr("data-selectedOptionsTargetAction")) {
                case "insertBefore":
                    r.insertBefore(i);
                    break;
                case "insertAfter":
                    r.insertAfter(i);
                    break;
                case "appendTo":
                    r.appendTo(i);
                    break;
                default:
                    r.prependTo(i)
            }
            var o = r.find(".selected-options-list");
            o.empty(), r.find("a.toggleControl").off("click").on("click", function() {
                s(e(this))
            });
            var l = t.find(".priceRangeFilterPanel7Spikes");
            if (l.length > 0) {
                var n = l.find("#slider"),
                    d = n.attr("data-sliderminvalue"),
                    c = n.attr("data-slidermaxvalue"),
                    p = e(".priceRangeCurrentPricesPanel .currentMinPrice").text(),
                    u = e(".priceRangeCurrentPricesPanel .currentMaxPrice").text();
                if (n.length > 0 && (d !== p || c !== u)) {
                    var f = e('<span class="option">' + p + " - " + u + "</span>");
                    f.anchorCustomClick(l.find(".clearPriceRangeFilter"));
                    var h = l.find(".toggleControl").text(),
                        g = e('<li class="price-range-selected-ranges"><label>' + h + ":</label></li>");
                    g.append(f), o.append(g)
                }
            }
            t.find(".filter-block").each(function() {
                var t = !1,
                    r = e(this),
                    i = e("<li><label>" + r.children(".title").children("a.toggleControl").first().text() + ":</label></li>");
                r.find("[data-option-ids][selected], [data-option-ids][checked]").each(function() {
                    var r = e(this),
                        o = r.text() || r.next("label").text(),
                        s = e('<span class="option">' + o + "</span>");
                    t = !0, a ? s.anchorCustomClick(r.closest(".filtersGroupPanel").siblings(".title").children(".clearFilterOptions")) : s.anchorCustomClick(r), i.append(s)
                }), t && o.append(i)
            }), o.children().length > 0 ? r.show() : (r.hide(), t.prepend(r))
        }

        function n(t, r) {
            if (null != t || (t = parseInt(e(".productsPageSizeDropDown .toplevel p").text()), !isNaN(t))) {
                r = parseInt(r), t > r && (t = r);
                var i = e(".nopAjaxFilters7Spikes").attr("data-numberofreturnedproductsselector") || ".product-viewmode",
                    a = e(i),
                    o = e(".number-of-returned-products.sample-element").first();
                e(".number-of-returned-products").not(o).remove();
                var s = o.clone();
                s.removeClass("sample-element"), s.children(".productsPerPage").text(t), s.children(".allProductsReturned").text(r), 0 === a.length ? e(".product-selectors").append(s) : a.after(s), s.css("display", "").addClass("active")
            }
        }

        function d() {
            var t = o(),
                r = e(t).filter(".selected");
            return r.length > 0 ? r.attr("data-dropdownoptionvalue") : e(".viewOptionsDropDown").attr("data-DropDownOptionsSelectedValue") || e(".viewOptionsDropDown").val() || null
        }

        function c(i, a, o, s, c, p, u) {
            if (!r.waitForAjaxRequest && "" !== s) {
                this.isProductRefreshTriggeredByScroll = u || !1, void 0 == s ? s = "" : p = !0, this.setSpecificationFilterSelection(i, a);
                var f = this.getSpecificationFiltersModel(),
                    h = this.getAttributeFiltersModel(),
                    g = this.getManufacturerFiltersModel(),
                    v = this.getVendorFiltersModel(),
                    F = this.getOnSaleFiltersModel(),
                    S = this.getPriceRangeFilterModel();
                void 0 == o && (o = null);
                var P = e(".sortOptionsDropDown").val() || e(".nopAjaxFilters7Spikes").attr("data-defaultsortoption") || null,
                    x = d(),
                    k = e(".productsPageSizeDropDown").val() || null,
                    m = t.getUrlVar("pageNumber");
                void 0 == m || null != o || void 0 != c && c !== !1 || (o = m), void 0 == p && (p = !1);
                var w = {
                    categoryId: this.categoryId,
                    manufacturerId: this.manufacturerId,
                    vendorId: this.vendorId,
                    priceRangeFilterModel7Spikes: S,
                    specificationFiltersModel7Spikes: f,
                    attributeFiltersModel7Spikes: h,
                    manufacturerFiltersModel7Spikes: g,
                    vendorFiltersModel7Spikes: v,
                    pageNumber: o,
                    orderby: P,
                    viewmode: x,
                    pagesize: k,
                    queryString: s,
                    shouldNotStartFromFirstPage: p,
                    onSaleFilterModel: F,
                    keyword: this.keyword,
                    searchCategoryId: this.searchCategoryId,
                    searchManufacturerId: this.searchManufacturerId,
                    priceFrom: this.priceFrom,
                    priceTo: this.priceTo,
                    includeSubcategories: this.includeSubcategories,
                    searchInProductDescriptions: this.searchInProductDescriptions,
                    advancedSearch: this.advancedSearch,
                    isOnSearchPage: this.isOnSearchPage
                };
                this.isProductRefreshTriggeredByScroll || this.showProductPanelAjaxBusy();
                var y = this,
                    A = this.getFilteredProductsUrl;
                r.waitForAjaxRequest = !0, e.ajax({
                    cache: !1,
                    type: "POST",
                    data: e.toJSON(w),
                    contentType: "application/json; charset=utf-8",
                    url: A
                }).done(function(t) {
                    "" !== s && (y.changeViewModeOrderByAndPageSize(t), y.setPriceRangeValues(t));
                    var i = y.refreshProducts(t, y.isProductRefreshTriggeredByScroll);
                    if (!i) return void(r.waitForAjaxRequest = !1);
                    if (y.refreshFilters(t), y.refreshProductsPager(t), y.refreshClearButtons(), "NO HASH QUERY" !== s) {
                        y.expandFilterPanelsWithSelectedOptions();
                        var a = e(t).filter("#urlHashQuery").val().toString();
                        "" !== a ? (y.isProductRefreshTriggeredByScroll && (a = a.slice(0, a.indexOf("&pageNumber"))), e.address.value(a)) : e.address.value("")
                    }
                    y.hideProductPanelAjaxBusy(), r.waitForAjaxRequest = !1;
                    var o = e(".nopAjaxFilters7Spikes").attr("data-scrollToElement");
                    if (!y.isProductRefreshTriggeredByScroll && void 0 != o && "true" === o.toLowerCase()) {
                        var d = e(".nopAjaxFilters7Spikes").attr("data-scrollToElementSelector"),
                            c = d.split(","),
                            p = ".product-selectors";
                        if (void 0 != c && c.length > 0) {
                            for (var u = 0; u < c.length; u++)
                                if (e(c[u].trim()).length > 0) {
                                    p = c[u].trim();
                                    break
                                }
                            e(p).length > 0 && e("html, body").animate({
                                scrollTop: e(p).offset().top
                            }, "slow")
                        }
                    }
                    e(".productPanelAjaxBusy").length < 1 && y.addProductPanelAjaxBusyToPage();
                    var f = e(t).filter("#totalCount").val().toString();
                    if (e.event.trigger({
                            type: "nopAjaxFiltersFiltrationCompleteEvent",
                            totalCount: f
                        }), "true" === e(".nopAjaxFilters7Spikes").attr("data-showSelectedFiltersPanel").toLowerCase() && l(), "true" !== e(".nopAjaxFilters7Spikes").attr("data-enableinfinitescroll").toLowerCase() && "false" !== e(".nopAjaxFilters7Spikes").attr("data-numberofreturnedproductsselector").toLowerCase()) {
                        var h = k;
                        e(".page-body .product-grid:not(.featured-product-grid)").length > 0 ? h = e(".page-body .product-grid:not(.featured-product-grid) .item-box").length : e(".page-body .product-list").length > 0 && (h = e(".page-body .product-list .item-box").length), n(h, f)
                    }
                }).fail(function() {
                    y.hideProductPanelAjaxBusy(), alert("Loading the page failed."), r.waitForAjaxRequest = !1
                }).always(function() {
                    y.isProductRefreshTriggeredByScroll = !1
                })
            }
        }

        function p() {
            e(".nopAjaxFilters7Spikes .filtersGroupPanel").each(function() {
                var t = e(this),
                    r = !0;
                t.find("[data-option-ids]").each(function() {
                    return e(this).is(":disabled") ? void 0 : (r = !1, !1)
                }), r ? t.find("select").attr("disabled", "disabled") : t.find("select").removeAttr("disabled"), t.toggleClass("disabled", r)
            })
        }

        function u(t) {
            var r = this,
                i = e(t).filter("#specificationFilterModel7SpikesJson").val().toString(),
                a = e.parseJSON(i);
            r.refreshSpecificationFilters(a, r.filtersUIMode);
            var o = e(t).filter("#attributeFilterModel7SpikesJson").val().toString(),
                s = e.parseJSON(o);
            r.refreshAttributeFilters(s, r.filtersUIMode);
            var l = e(t).filter("#manufacturerFilterModel7SpikesJson").val().toString(),
                n = e.parseJSON(l);
            r.refreshManufacturerFilters(n, r.filtersUIMode);
            var d = e(t).filter("#vendorFilterModel7SpikesJson").val().toString(),
                c = e.parseJSON(d);
            r.refreshVendorFilters(c, r.filtersUIMode);
            var u = e(t).filter("#onSaleFilterModel7SpikesJson").val().toString(),
                f = e.parseJSON(u);
            r.refreshOnSaleFilters(f, r.filtersUIMode), p()
        }

        function f(t) {
            var r = this,
                i = e(t).filter("#priceRangeFromJson").val().toString(),
                a = e.parseJSON(i),
                o = e(t).filter("#priceRangeToJson").val().toString(),
                s = e.parseJSON(o);
            void 0 != r.SetSliderValues && r.SetSliderValues(a, s)
        }

        function h(t) {
            var r = e(t.currentTarget).attr("data-pageNumber");
            null != t.data && void 0 != t.data.filtersManager && t.data.filtersManager.requestProductsForSelectedFilters(void 0, void 0, r, void 0, void 0, !0)
        }

        function g() {
            var e = this.buildSpecificationFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement);
            return e
        }

        function v() {
            var e = this.buildAttributeFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement);
            return e
        }

        function F() {
            var e = this.buildManufacturerFiltersModel(this.categoryId, this.selectedFilterGroupElement);
            return e
        }

        function S() {
            var e = this.buildVendorFiltersModel(this.categoryId, this.selectedFilterGroupElement);
            return e
        }

        function P() {
            var e = this.buildOnSaleFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement);
            return e
        }

        function x() {
            var e = null;
            return void 0 != this.buildPriceRangeFilterModel && (e = this.buildPriceRangeFilterModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement)), e
        }

        function k(t, r) {
            var i, a = d() || e(".nopAjaxFilters7Spikes").attr("data-defaultViewMode"),
                o = this.getProductsPanelSelector(a),
                s = e("." + H);
            if (null != e(t).filter(o).html()) {
                if (s.length > 1 && (s = s.last()), r) {
                    var l = e(t).filter(o),
                        n = l.find(".item-box");
                    l.hasClass("product-grid") ? s.hasClass("product-list") && s.removeClass("product-list").addClass("product-grid") : s.hasClass("product-grid") && s.removeClass("product-grid").addClass("product-list"), e(".infinite-scroll-loader").hide(), s.find(".item-box").last().after(n)
                } else s.replaceWith(e(t).filter(o));
                i = !0
            } else this.hideProductPanelAjaxBusy(), e("#nopAjaxFiltersNoProductsDialog").length > 0 ? this.showNoProductsModalDialog() : (s.prepend(e(t).filter("#nopAjaxFiltersNoProductsDialog")), this.showNoProductsModalDialog()), i = !1;
            return i
        }

        function m(t) {
            return "list" === t ? e(".nopAjaxFilters7Spikes").attr("data-ProductsListPanelSelector") || ".product-list" : e(".nopAjaxFilters7Spikes").attr("data-productsGridPanelSelector") || ".product-grid"
        }

        function w() {
            return e(".nopAjaxFilters7Spikes").attr("data-pagerPanelSelector") || ".pager"
        }

        function y() {
            var t = e(".nopAjaxFilters7Spikes").attr("data-productsGridPanelSelector") + "," + e(".nopAjaxFilters7Spikes").attr("data-ProductsListPanelSelector"),
                r = e(".master-wrapper-page " + t).not(".featured-product-grid").last();
            return r
        }

        function A(t) {
            var r = this.getPagerPanelSelector(),
                i = e(r);
            if (void 0 !== t) {
                var a = e(t).filter(r);
                if (0 === i.length && a.length > 0) {
                    var o = e(".nopAjaxFilters7Spikes").attr("data-pagerpanelintegrationselector") || ".product-grid, .product-list",
                        s = e(o);
                    s.length > 0 && (s.hasClass("product-grid") || s.hasClass("product-list")) && (s = s.not(".featured-product-grid").last()), 0 === s.length && (s = y()), s.after('<div class="pager"></div>'), i = e(r)
                }
                "true" === e(".nopAjaxFilters7Spikes").attr("data-enableinfinitescroll").toLowerCase() && i.hide(), i.html(a.html()), i.length > 0 && 0 === a.length && i.remove()
            }
            this.setPagerLinks(i)
        }

        function b(t) {
            var r = this;
            t.find("a").each(function() {
                var t = e(this).attr("href"),
                    i = "";
                if (void 0 != t) {
                    var a = /pagenumber=(\d+)/;
                    t = t.toLowerCase();
                    var o = a.exec(t);
                    null != o && o.length > 1 && (i = o[1])
                }
                e(this).removeAttr("href"), e(this).attr("data-pageNumber", i), e(this).click({
                    filtersManager: r
                }, h)
            })
        }

        function C(t) {
            var r = e(t).filter("#currentPageSizeJson").val(),
                a = e.parseJSON(r),
                s = e(t).filter("#currentOrderByJson").val(),
                l = e.parseJSON(s),
                n = e(t).filter("#currentViewModeJson").val(),
                d = e.parseJSON(n);
            i(".sortOptionsDropDown", l), i(".viewOptionsDropDown", d), i(".productsPageSizeDropDown", a), e(o()).removeClass("selected").filter("." + d).addClass("selected")
        }

        function j(t) {
            var r = e(t.currentTarget).closest(".filtersGroupPanel");
            this.clearFilterOptionsForFiltersGroupElement(r)
        }

        function M(t) {
            var r = e(t.currentTarget),
                i = r.parent().siblings(".filtersGroupPanel"),
                a = t.data.filtersManager,
                o = i.find(".select-wrap");
            o.find(".select-inner").text(o.find("select option:selected").text()), a.clearFilterOptionsForFiltersGroupElement(i)
        }

        function D(e) {
            e.find("[data-option-ids]").removeAttr("checked selected"), this.requestProductsForSelectedFilters(e, void 0)
        }

        function O() {
            e(".nopAjaxFilters7Spikes .select-wrap").each(function() {
                var t = e(this);
                t.find(".select-inner").text(t.find("select option:selected").text())
            }), e(".nopAjaxFilters7Spikes .filtersGroupPanel").find("[data-option-ids]").removeAttr("checked selected"), filtersManager.clearPriceRangeFilterControl(), filtersManager.requestProductsForSelectedFilters()
        }

        function I() {
            var t = !1;
            e(".nopAjaxFilters7Spikes .filtersGroupPanel").each(function() {
                var r = e(this),
                    i = !1;
                r.find("[data-option-ids]").each(function() {
                    var t = e(this);
                    return null != (t.attr("selected") || t.attr("checked")) ? (i = !0, !1) : void 0
                });
                var a = r.parent().find("a.clearFilterOptions");
                i ? (a.show(), t = !0) : a.hide()
            });
            var r = e(".nopAjaxFilters7Spikes .filtersTitlePanel a.clearFilterOptionsAll");
            if (t) r.show();
            else {
                var i = !1;
                void 0 != this.determineIfPriceRangeHasBeenSelected && (i = this.determineIfPriceRangeHasBeenSelected()), i ? r.show() : r.hide()
            }
        }

        function B() {
            e(".clearPriceRangeFilter, .clearFilterOptions").filter(":visible").siblings("a.toggleControl.closed").click()
        }

        function T() {
            var t = e(".pager .next-page > a").first();
            if (0 === t.length) return void e(window).off("scroll.filtersinfinitescroll resize.filtersinfinitescroll orientationchange.filtersinfinitescroll");
            var i = y();
            if (0 !== i.length) {
                var a = e(window).outerHeight(),
                    o = e(window).scrollTop(),
                    s = i.innerHeight(),
                    l = i.offset().top;
                if (a + o > s + l) {
                    e(".infinite-scroll-loader").show();
                    var n = new r,
                        d = parseInt(t.attr("data-pageNumber"));
                    n.requestProductsForSelectedFilters(void 0, void 0, d, void 0, void 0, !0, !0)
                }
            }
        }

        function R() {
            if (0 === e(".infinite-scroll-loader").length) {
                var t = e(".ajaxBusyPanelParent");
                0 === t.length && (t = y()), t.append('<div class="infinite-scroll-loader">' + e(".nopAjaxFilters7Spikes").attr("data-infinitescrollloadertext") + "</div>")
            }
        }

        function N() {
            R(), e(".product-page-size, " + e(".nopAjaxFilters7Spikes").attr("data-pagerpanelselector")).hide();
            var t = function() {
                e(window).off("scroll.filtersinfinitescroll resize.filtersinfinitescroll orientationchange.filtersinfinitescroll").on("scroll.filtersinfinitescroll resize.filtersinfinitescroll orientationchange.filtersinfinitescroll", function() {
                    T()
                }), T()
            };
            e(document).on("nopAjaxFiltersFiltrationCompleteEvent", t), window.location.hash && "" !== window.location.hash || t()
        }

        function J() {
            var t = e(".nopAjaxFilters7Spikes").attr("data-sortOptionsDropDownSelector") || ".products-orderby";
            return a(t)
        }

        function E() {
            var t = e(".nopAjaxFilters7Spikes").attr("data-productsPageSizeDropDownSelector") || ".products-pagesize";
            return a(t)
        }

        function G(e, t) {
            i(".sortOptionsDropDown", e), t && (new r).requestProductsForSelectedFilters()
        }

        function V(e, t) {
            i(".viewOptionsDropDown", e), t && (new r).requestProductsForSelectedFilters(void 0, void 0, void 0, void 0, void 0, !0)
        }

        function z(e, t) {
            i(".productsPageSizeDropDown", e), t && (new r).requestProductsForSelectedFilters()
        }

        function U(t, r) {
            t.each(function() {
                var t = "",
                    i = e(r).val(),
                    a = e.parseJSON(i);
                if (!e(this).is("select")) {
                    var s = ".";
                    return null != a[0] && a[0].Selected ? s += a[0].Value.toLowerCase() : null != a[1] && a[1].Selected && (s += a[1].Value.toLowerCase()), void e(o()).removeClass("selected").filter(s).addClass("selected")
                }
                for (var l = 0; l < a.length; l++) {
                    var n = a[l],
                        d = "<option ";
                    n.Disabled && (d += 'disabled="disabled" '), n.Selected && (d += 'selected="selected" '), d += 'value="' + n.Value + '">', d += n.Text + "</option>", t += d
                }
                e(this).html(t)
            })
        }

        function q() {
            var t = e(J());
            0 !== t.length && (t.addClass("sortOptionsDropDown").removeAttr("onchange").off("change").on("change", function(t) {
                t.preventDefault();
                var r = e(this),
                    i = null == r.attr("valueChangedByScript");
                r.removeAttr("valueChangedByScript"), G(r.val(), i)
            }), U(t, "#availableSortOptionsJson"))
        }

        function L() {
            var t = e(o());
            if (0 !== t.length) {
                var r = t.is("select");
                r ? t.addClass("viewOptionsDropDown").removeAttr("onchange").off("change").on("change", function(t) {
                    t.preventDefault();
                    var r = e(this),
                        i = null == r.attr("valueChangedByScript");
                    r.removeAttr("valueChangedByScript"), V(r.val(), i)
                }) : (t.filter(".grid").attr("data-dropdownoptionvalue", "grid"), t.filter(".list").attr("data-dropdownoptionvalue", "list"), t.on("click", function(r) {
                    r.preventDefault(), e(this).hasClass("selected") || (t.removeClass("selected"), e(this).addClass("selected"), V(e(this).attr("data-dropdownoptionvalue"), !0))
                })), U(t, "#availableViewModesJson")
            }
        }

        function $() {
            var t = e(E());
            0 !== t.length && (t.addClass("productsPageSizeDropDown").removeAttr("onchange").off("change").on("change", function(t) {
                t.preventDefault();
                var r = e(this),
                    i = null == r.attr("valueChangedByScript");
                r.removeAttr("valueChangedByScript"), z(r.val(), i)
            }), U(t, "#availablePageSizesJson"))
        }

        function W() {
            q(), L(), $(), e(document).trigger({
                type: "ajaxFiltersReplacedDropDownsEvent"
            })
        }
        var H = "nop7SpikesAjaxFiltersGrid";
        e.fn.extend({
            anchorCustomClick: function(t) {
                return e(this).first().on("click", function(r) {
                    r.preventDefault(), e(t).trigger("click")
                })
            }
        }), r.prototype.requestProductsForSelectedFilters = c, r.prototype.getSpecificationFiltersModel = g, r.prototype.getAttributeFiltersModel = v, r.prototype.getManufacturerFiltersModel = F, r.prototype.getVendorFiltersModel = S, r.prototype.getOnSaleFiltersModel = P, r.prototype.getPriceRangeFilterModel = x, r.prototype.refreshProducts = k, r.prototype.refreshProductsPager = A, r.prototype.setPagerLinks = b, r.prototype.getProductsPanelSelector = m, r.prototype.getPagerPanelSelector = w, r.prototype.clearFilterOptions = M, r.prototype.clearFilterOptionsForFiltersGroupElement = D, r.prototype.selectAllFilterDropDownOption = j, r.prototype.clearAllFilterOptions = O, r.prototype.refreshClearButtons = I, r.prototype.expandFilterPanelsWithSelectedOptions = B, r.prototype.changeViewModeOrderByAndPageSize = C, r.prototype.setPriceRangeValues = f, r.prototype.refreshFilters = u, r.prototype.clearPriceRangeFilterControl = function() {}, r.prototype.refreshManufacturerFilters = function() {}, r.prototype.refreshVendorFilters = function() {}, r.prototype.refreshSpecificationFilters = function() {}, r.prototype.refreshAttributeFilters = function() {}, r.prototype.refreshOnSaleFilters = function() {}, r.prototype.buildManufacturerFiltersModel = function() {}, r.prototype.buildVendorFiltersModel = function() {}, r.prototype.buildSpecificationFiltersModel = function() {}, r.prototype.buildAttributeFiltersModel = function() {}, r.prototype.buildOnSaleFiltersModel = function() {}, r.prototype.addProductPanelAjaxBusyToPage = function() {
            var t = y();
            t.addClass("ajaxBusyPanelParent " + H), t.css("position", "relative"), t.append(e('<div class="productPanelAjaxBusy"></div><div class="clear"></div>')), e(".productPanelAjaxBusy").hide(), R()
        }, r.prototype.setSpecificationFilterSelection = function(e, t) {
            this.selectedFilterGroupElement = e, this.selectedFilterOptionElement = t
        }, r.prototype.showNoProductsModalDialog = function() {
            var t = e("#nopAjaxFiltersNoProductsDialog").data("kendoWindow"),
                r = e("#nopAjaxFiltersNoProductsDialog").attr("title");
            r || (r = "NO RESULTS FOUND"), t || (t = e("#nopAjaxFiltersNoProductsDialog").kendoWindow({
                draggable: !1,
                resizable: !1,
                width: "300px",
                height: "100px",
                title: r,
                modal: !0,
                actions: ["Close"],
                animation: !1,
                visible: !1
            }).data("kendoWindow"), t.wrapper.addClass("ajaxFilters")), t.center(), t.open(), e(document).on("click", ".k-overlay", function() {
                t.close()
            })
        }, r.prototype.showProductPanelAjaxBusy = function() {
            e(".productPanelAjaxBusy").show()
        }, r.prototype.hideProductPanelAjaxBusy = function() {
            e(".productPanelAjaxBusy").hide()
        }, r.getFilterItemStateBasedOnAttributes = function(e) {
            var t = null != (e.attr("selected") || e.attr("checked")),
                r = null != e.attr("disabled");
            return t && r ? "CheckedDisabled" : t && !r ? "Checked" : !t && r ? "Disabled" : "Unchecked"
        }, r.waitForAjaxRequest = !1, r.addStateClassToCheckBoxParent = function(e, t) {
            var r = e.parent("li");
            0 !== r.length && ((1 === t || 2 === t) && r.addClass("checked"), (2 === t || 3 === t) && r.addClass("disabled"), 0 === t && r.removeClass("checked disabled"))
        }, r.addStateAttributesToOption = function(e, t, r) {
            1 === t && r && e.attr("selected", "selected"), (1 === t || 2 === t) && (r ? e.attr("selected", "selected") : e.attr("checked", "checked")), (2 === t || 3 === t) && e.attr("disabled", "disabled"), 0 === t && e.removeAttr("checked selected disabled")
        }, r.addStateClassAndAttributesToOption = function(e, t, i, a) {
            return i ? 1 === t && (a = !1) : r.addStateClassToCheckBoxParent(e, t), r.addStateAttributesToOption(e, t, i), a
        }, e(document).ready(function() {
            var t = new r;
            t.addProductPanelAjaxBusyToPage(), e(".nopAjaxFilters7Spikes .block .title a.toggleControl").off("click").on("click", function() {
                s(e(this))
            }), e(".nopAjaxFilters7Spikes .block .title a.clearFilterOptions").each(function() {
                e(this).click({
                    filtersManager: t
                }, t.clearFilterOptions), e(this).hide()
            }), e(".nopAjaxFilters7Spikes .filtersDropDown a.allFilterDropDownOptions").each(function() {
                e(this).click({
                    filtersManager: t
                }, t.selectAllFilterDropDownOption)
            });
            var i = e(".nopAjaxFilters7Spikes .filtersTitlePanel a.clearFilterOptionsAll");
            if (i.click({
                    filtersManager: t
                }, t.clearAllFilterOptions), i.hide(), t.refreshProductsPager(), t.filtersUIMode === t.filtersUIModeEnum.useDropDowns) {
                var a = e(".filtersDropDownPanel.filtersGroupPanel"),
                    o = a.length + 100;
                a.each(function() {
                    e(this).css("z-index", o--)
                })
            }
            "true" === e(".nopAjaxFilters7Spikes").attr("data-enableinfinitescroll").toLowerCase() && N(), null == e("body").attr("nosimpleselect") && e(".filtersPanel select").simpleSelect()
        }), e(document).ready(function() {
            W()
        })
    }(jQuery, sevenSpikes, FiltersManager);